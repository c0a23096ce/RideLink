# ライドシェアサービスの処理の流れ

## 1. ユーザー登録とログイン
- 新規ユーザーは登録フォームから情報を入力  
  - 登録時にUserテーブルへ情報を保存  
- 登録済みユーザーはログインしてサービスを利用  

## 2. 募集ロビー作成
- ドライバーはWebサービスで現在地と目的地を入力してロビーを作成  
- 乗客はWebサービスで自身の現在地と目的地を指定  

## 3. マッチング処理
- 乗客からのマッチングリクエストが発生すると、MatchingServiceが現在地・目的地の距離を確認  
- 条件に合致したロビーに乗客を参加させる  
  - この時、ステータスは`pending`（保留中）となる  

## 4. マッチング通知と承認／拒否
- ドライバー・乗客双方にマッチング候補の通知を送付  
- ユーザーはマッチングを承認または拒否可能  
  - 承認：マッチングロビーから抜けてDBに確定済みとして記録  
  - 拒否：別のロビーへのマッチングを再実施  

## 5. ルート作成
- RouteGenerateServiceがマッチング成立者の緯度経度からルートを生成  

## 6. 旅行の実行と完了
- マッチングが成立したユーザー同士が合流して移動  
- 移動完了時にWebサービス上で完了を報告  
  - `Match.status`を`completed`に更新